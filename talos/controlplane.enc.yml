version: v1alpha1
debug: false
persist: true
machine:
    type: controlplane
    token: ENC[AES256_GCM,data:caPbVQ5+9ALgY/vJnMFd3fIoiaBmydY=,iv:byApnoFkfCmnDoOTy59zX/YMjY+DQ1U8mLVDDe2uj18=,tag:gCvPoRrmQOxGxOvwHt9jiA==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:p7nmnpMq9g4WzEXkk2/LfBF88gjq0tMSp3KTbp3RgC4ROUNFM4v703OLGUZe8WAob9yFMrc+SOVoBObnRJh/kgiZlyJol8zGNRo6YBn5zF33dTuso+jJ3i8RSOxRHYzUpr0NF4P1WQQu71OdQd+12gd2AtFwGZRUHTYgl3ZygA7CsJt1EiaOL7m7/S6GhsHEUuFTEvZ2bKiIRFqmH2i+i5FC6rdEcNoMobGcSNiDSAVl/VKUGYvbvY8PKkSUTdUSGe2rxCRQU1eX+CG9Tpa//sbgCkOm3Xz839Lc3RDGSiv85E47kG5IiYO6erEXK+/5xOakbKKwMDw8fQXAx2jePCuzVAV+u2BVlrpSwKZsMZX2gx32F14LfybzCrP92HsJHXTJUqQZsl5YVW3TbV+/X/hOiR98dQQyH2roDCFTldghTGJ+i8qPzQDrsRRaeIJtuY0JAEKRlN/Lk4j6CWEsAaefGNlHQ3YlQ5C7Nopk1XpqYMFUX5cWHN77DB7nFWYXz6ZKV5sOf7NMk0jTQLiOY37MvKVrUl1d9t25AiLvv67gNCYotf/dM840ph1oa1rQo2vByJliwiFgPlpocESaNoSUbIC9285PkYLNxT3IjjMKtGvvt2DVRltnYoiS3xhpNnNkx3nREO8cVsDHJiKs4fBUBmGIF1LuWs0ftUa9K2h/poQ3WJAKBQrBpawLsknOtmehHXCuWamQxSCJyxNE3m/T75LG8RHcBhigGBJkERNxCFrgxpCt9omSFOWjvnDP/PqANSeho78Hu9D3HbbMg14IHEQgia8sgsfBAh4SUwZ6mzqtA6BlB7X1fZ/+lNp0tdYwlSsL1phqzrVuxdABMSVQEiHR7+Q+8dgS3OxXzEgUnhr6,iv:dZ44LZoMp4OSmQmrIvrDV8P0wmMZq/NmakBmWpaAiZY=,tag:offG+i/+GMhNBAQ/tA+LLw==,type:str]
        key: ENC[AES256_GCM,data:bqILzqsCmeWVmtnoETI/5faH1lKVa9YGdqgpPENvBO1ysU9zZBSIPn/52R/O3j5xdZzEj6+1E80LpzqUzo8dAWqA4cwLc5ttKmBH4d46qMsMQ1l1HV4pzSXohJ2rrA0tri0+iSNQpAIAsd2aTRk3Wk3UwKp1CrMskyxkJqQDw0culG4NINX3JMFOfVd7nCx5C/XgCuLDreDR8TEG0AB5Rxow4eK56FjYlZ2KSH4aLKNTLUtk,iv:ebyVKMHMDbSbPDJjju7sRsQk2spsZupGtPSDGZ9EXlw=,tag:Hvoer6PwRXsrFv4qOIvIBQ==,type:str]
    certSANs: []
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.28.3
        defaultRuntimeSeccompProfileEnabled: true
        disableManifestsDirectory: true
        extraArgs:
            rotate-server-certificates: true
    network:
        hostname: talos
        interfaces:
            - deviceSelector:
                busPath: 0*
              dhcp: true
              vip:
                ip: 192.168.4.5
        nameservers:
            - 1.1.1.1
            - 8.8.8.8
    install:
        disk: /dev/sda
        #qemu-guest-agent, tailscale, util-linux-tools
        image: factory.talos.dev/installer/7d0c9bb43d29c3a66af593485d6d95ae14f241c90678c9cc05a4cf99d928ec1b:v1.6.0
        wipe: true
    registries: {}
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
    sysctls:
        net.ipv4.ip_forward: "1"
        net.ipv6.conf.all.forwarding: "1"
    time:
        servers:
            - 192.168.4.1
    files:
        - content: ENC[AES256_GCM,data:vaAL5acJLMFgwTvAjNwfQllkzaV8boVC6sDgGLzxJ2p2pglVCoAMBX3QQiCNnRQT82C4vLzXRZlHJ470CYSv23AzUbZrBW5adTUekj1xbzrGD2sw86OTult+70TGysoARbt1+2lPSd+fvsyhUk5RYz9QsKyx0lNHwz22dNoylQz5wccsXyiA9AA1dz8EpcqKNcZCZ8gLW++BtQ+lIGmtBPwXGBiNZ5zSa640F42L,iv:SV4arTQsdleR8CoON9+I/tKGcBL5scCw5jjIFRnHDMg=,tag:FlyHegm79niQSNExIEs7VA==,type:str]
          permissions: 420
          path: /var/etc/tailscale/auth.env
          op: create
cluster:
    id: ENC[AES256_GCM,data:pincyN8reHuUTPPgH+0bSnl4wIQMjAYqf4LyAnrzLZYYpQqDJHtQYvA7mqM=,iv:Xo1VwuMBTJvTVDRcJrPFphYbQQh5ifofHbCX8ddSKlE=,tag:FK5nneW5Wk1dCiZbENqf8Q==,type:str]
    secret: ENC[AES256_GCM,data:H9Cn0qHFAOF3XZPORjneYjD4BCuWYLrgICHhzPrBm8f9pxFYa5IvRDGBkwA=,iv:Jd7ewzibPc5q+fy+VUKOia+ML1aWrLEvTXDmHuXc75Y=,tag:LZx6cTbMl9RsNOFT54nt1A==,type:str]
    controlPlane:
        endpoint: https://talos.s3rv.dev:6443
    clusterName: talos-proxmox
    network:
        dnsDomain: talos.s3rv.dev
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    token: ENC[AES256_GCM,data:xN/iU531uj/wkICk34XsdMwsAsMTT1Y=,iv:iI2I59W+civwRIde4wSgyM0C80QYOg282svIwDzKZjM=,tag:vbNKVLXNWfn2hQh+z8hahQ==,type:str]
    secretboxEncryptionSecret: ENC[AES256_GCM,data:WhHm3uxvWY1V2HnBnKZKVwHQ/kUGISrZ+3BMZOr5wNbR+upsk2AsqwRQDOk=,iv:s4FZHuJv8uJo498BEGG/jwLqEiyLeUE/JtpO/2XYIuY=,tag:9Re4aL90uBrfpQiKhiQAdw==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:FMcLvPLCD5Qh22/8zIHgXXwZeM78vjffcRuwrzaCelT6CcFevw0xpyb4sd66iUdxTW805pr+Jfu72uLAnDont9GND/wb6D15079hzeFyRmzK3lXuXKp9iCZcFgae46M2Dlo8gL1wxPxMZvHlUNi0NdxjodqL64zJpz33CUoNpMv/5P29a92URaRuMFjTz23UK/T2+mirh22TuwnJKUEiwwktUmxO8EZKm2npefSn4FD97ibG6LUtwF9PD/6TPnIBLwjYvVQnFCKWR211vWYziD33KMh8nAoEEeNmoSEHsQK6oD7GOYEkW5Gw2a+VjtunFI0Z8SKAjAKGzawws21e7RtSGqm3XJE6df9x4KQJEeM/4S7tTQZm/2+FcsU2Kzwarc7ytDY5dqTinccxWfoJEfSmK4khRbJQPAAceteQUw19sMqtJupKZI/RrSvmpulMDVU/MVv+Wvz5knwM5KFoW4JdO62R6T1s7eoNwPdEL3dy9cvba+/1ryqSscQey1/zv4QzoGAooNM7qL3s5ZBx4LlgjH2uCrlGd5f8tE5yfazYcyzTpJeRRfoyJ8d+capBzS0l7/vGy4xtvuPeh72sdPg7ffSlznbV0dOzT2RjaW5H97mmENX5oYiQz7eIlp/Aq/VncXfIgVI6B0UW673ZrEqgQca207hpRc4vjkWVt4/BLGferiRlsnc9Vwhpfci7esz+276X2+2e4KKfyesJopdWK0mQr6qTAaqt++MDSt23Z7mCA5l9uhcligT4c7pLbfX3rNQo4BND2BAOKcs+cgi4B3EJd7ADym1T2E5y7yI9tLyrNBtB/3H7PRQ5abJSKmxjqcP5p1QShy0zNpdcXutByizFsQMThIGNtf/YRS8gSM6kHFBFMgn48NjQesmQoF83n03CW3/PYqwtxW1aVsimiX4T6Fo7Srm6eGVYcigYsdP21agY4R7BgUrqKyPpgTZbtHn72ogZupr83FmoxEAjrXR4J6Os6uNh0Q6XwG3R5rrJkk24seL1I55InPC9RzmQNZfSxrcmqEvJk6KYWPGdXWWclDO7Fsz2Ew==,iv:BQRPEZogE5HbFov/9VPLG1KsZDNSRJf9kJXk7VbEf6Q=,tag:rKFNdWLRxWetgHIHjCTIcQ==,type:str]
        key: ENC[AES256_GCM,data:Boc3G1/oDqLD/RcOyPRnD+KSSLXoX8Ef73cn9hZSjDlrGEGbweToE3zALonpl8tiezSjECQ9JVrQwcGqA6FR48o/XF4bH5iRts25zo0zXxag989JSkiLoo2gZbbFLOiLuO4RmHNyRlVNascaIXrvLq0uWKr+e5/tP5Z/ogD4KE/O6aBpNiH4II+8RtnDL6aB4tGUap+u9LTCznmJHU//87MknZ4xuHwiijqEDBjI1OGD7eAqjeLG5B5xHkN62s8RPz+FgY29fXlO7ZaEZd6fl6JLGmIF6zgg/JkFU2Yxr3XHqeXj1IWbFD96/gXymUxbH1vb2a3t2QT+7C/7DxbljOp3slDFzWNqicfdFrA0VW69XY25ZwA+8XgdiIt0Xv9A3QDgmM+0dpaziwnyKND9XA==,iv:eh76ynE06JFUWLfdvCQvbaOi+XVaFMiVSKIdPFZ0+8U=,tag:C7OLrHLtPRX0JVJwFQEnBQ==,type:str]
    aggregatorCA:
        crt: ENC[AES256_GCM,data:urQ8IvJlpzydzSptw4VVv2qvGYlgQyKcSViibljHhoTLmhemcJ16bjalUlsLScH6j5NMLaTlYhI4LtwX+YA5y/jewRfV/bemytXGo/0ot2vZbsNRrTNQ8Bbmjao3txp5woGoI7yCgC+9bHYlIOk2VhjtfLD3HzURyd0lZT24Yl5UXvqgPFKa9qBYkq7pkMsbneD7B9Zbh1oDdqLwDmtN3DuzblcEKeMplcLO2rsXy09qNFHL91ffIg3aPcGoxTUMLZv601XIa/+fRNG2Y4ULlDPFTELKyUC0ZrcEUngq7IJCWb5A2XsPgvhZBZc0EbNdkvrG58fiFPwe4vrwTJyn2aK4+dqnCaiY8HLhEuHSSW/uLyvCTA5RtyXtT74HGuOp/X+6twbMRH8Ehy8QXpr2VMs/vgkBoG4WrprY7KE49A8zLvu2bcNn5IJFz1zxoMkB56gSYVOGC0lasSwQLpDvXbRAzuCcPsJ8415//jzEbVyg3lDJscvnG+hfhuwd6WwAzRoKkqOd6DAJtglWQFDbP+WpxQMKqzkYv3u4vrI+uCTK5C8XBKfXcOH3LXLxja35LyiWB9OTjd1l4ElLEnlDWzHVXqimiAI/dWcZwHXhVw/0Y2larbRc0p9Ghl699zGNYnbM/Z9VyRCSxpSUWM8JCpTdCOh0T/xW3Vt3PiMoKKEQrX0mc0pXTeGygmyZB8qoO4GQapjgf0J+z0qaLBLSiLbDYP0Vf1Y5IHPvSIPDYhWliBgQ4w7uDdvFoFf07TiAKo/R6ImNNCpCTKhpWyJ0FrZUaTqH78/Hc9jhRfI6iMKgpR4xF/LbvcK1PylkWKzDuRsHqnN93/aETDGCkJ8G5LEjvVgo5A6d/h/ImotwjY34f7tDHKcMmvTN952MHYcGP8/iPc0UyHQoouPJkDkcvQigLXOH72pk0RcX8q+N82i1WKJb0/vt7cBeWBA1fAo+,iv:Trw8eRji6zxEOBV5hg1WGxkszagTlaW8TZuQ9AOuROA=,tag:O5T81i3TV2sWHp6kRqoQ3w==,type:str]
        key: ENC[AES256_GCM,data:+QyIx2PTvoSQF8iN20TLyeWWaLqQkeZxAwrsZO2vGErdB5NZ1n2/18O6NkxiXJ/HEBmtGlx6mxhmT7vPpQpJa2Wws4mzbi4h/KYiUac+riL4hLaqRlLT+Evn5nBMz2w8f8oewvX8Nxdy7a04URSYjVl6il/d/IsMLnZl1JnjerodPOnoMYZIfu8DEmi1u8eI2mev0v/Prjpe+aXnlz0jS9gsZfI3vxYjSnGokoNCCL0XbVe/DARneduO+GemghHMTC6dQMngvWqtw6X/DTypZ9aWPhxBgfbKSsf8BpT53kuSliZYF6T7fTk4C4/hY+rlAhQR/0NhNoHNpjhuWnoFtk9mRnTWzJntQ602I3JPmBVqxOmirEEeBoJfnf7SfMLkfUGx6037ICIdGbVatTea4g==,iv:oVfM+RFWRb584leEomLa0R7U+a+9UT58EcJZjWEM8ns=,tag:BikNfES7AjAZT/DCPAVvYA==,type:str]
    serviceAccount:
        key: ENC[AES256_GCM,data:Ev7n5smKWQ4cV9P2kl2Az1i3u5H/71nb4pfIgPSmOHcMeky4VTuVDraPobOZilmgGuO35WAISCSL75fjpOiG4oehAh0RV2DYNM4BOgnfJ+5wBiCoVZMihTnPZsXu/H4oqOt9Lvk2zNor3T9Tok0Fvvz1uC7Zmxi/JHE3NrlrsKmsEm7BdXyiybPUMsKS2urFOB4lWL5sy4Fsvl9f0IjYzYQ9YEm5AAuidh2YiOtlgRDKfV5VbbVc64fHaDR/a7FYy9YsW4h07fSvMddlWe1NRB/yEMpbzrL4vvCnx56lEqlVSI05tSUSvQBjqkzAQBLf/2nG0ppNYxOtPBi7sM8pO24cl6/GA2CI9mVs92f+iWuMn7i6GNBz7tx2wp+5c5/FC/B7OKjFWJAvGYEVYO9XxA==,iv:BH9LFEWsOcDzqyzooetFGPiC20XT49q1zQhBUukVt0k=,tag:olZuwCw1JS82fX2uiLqQsg==,type:str]
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.28.3
        certSANs:
            - 192.168.4.5
            - talos.s3rv.dev
        disablePodSecurityPolicy: true
        admissionControl:
            - name: PodSecurity
              configuration:
                apiVersion: pod-security.admission.config.k8s.io/v1alpha1
                defaults:
                    audit: baseline
                    audit-version: latest
                    enforce: baseline
                    enforce-version: latest
                    warn: baseline
                    warn-version: latest
                exemptions:
                    namespaces:
                        - kube-system
                    runtimeClasses: []
                    usernames: []
                kind: PodSecurityConfiguration
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: Metadata
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.28.3
    proxy:
        image: registry.k8s.io/kube-proxy:v1.28.3
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.28.3
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: true
            service: {}
    etcd:
        ca:
            crt: ENC[AES256_GCM,data:uIBS3mtWauH6HaajEVhBClBdCT6tVndu7AFv2VxhvGcg8ioZenEwN8pkxNN916G+iTKZdGH58xzXg/25zLepjLU41Jws0xKHPCEMDbaEHBWDe0shG36hFLShghNiRtqrSPu3AqBS8WHHDwr4lwfp2aIt/Ia1+5t0YLCeqIFEb2qOg0fhN/mfOz23YiZaPFTHDatKYK07DSGw7N2e/Df/qqh0fyEtSFfAZLsCxLM5ZfvE8c6OH5DFmeCHnTGFQQZ+8bX8KU6loLsEatBOpAcDkyguDfXjxto0buaT/pbK1vyP11+y+iy4R6ld2CQ+QSnYDa7BaGf0HMNgmCBKcbldXkFzkjJeAlr6VGV+drA9t9Q8XZl60Bp7rZAC+qJyrs42iC0FMnw1lmIR54ragoPs+arevTSoF1T7tztlOKOtuCO7v8+ke/efTEZmhwr492OVCjN34pczOz5gQ63VDHuOdqxEgaYrKpBexO2cBuSkfo0/Ww4ogA2P1XZJTIIP/Gb083AvvsxbAttpY2Pdak9coqg8aix0gw2dP/zFRtsP4J3GoiInYlsxzjYi/teOJqhlxNVlefmcPPBRgZjXPrx5HT05zsuMSnuxEay2xvZNLfX7SmfUecAfX/fPtcM/6DXP+NOyA5Uh9OvG4tbK3s9TDV3DjT5FRjIOUa8aD11DI/uLwW6VYjZab2GrUqYkufB9gpwqSupA0J5gZ8akYAO42iYlfpfzHbT65v2tRQo1Q+f3gZCTR4ji/PxC0R0TZOzDlSDbFMARiR3qNqd2NvDsj2UwbAzZL8HVFBS9HE18RnhmvD9BT+23LfbkvVMImBh5X1EgRNToTZ8uyB5WZpBSHVDQ3rN5vyllsx7mMt9H0CN/kMttpmjGCb5IAXAvDDFW58wmjcXCCWyk/LFsfsa/hLxcEKpciHB62hHTIkjMpOo+csi8qlmYPq0umo25mfu0K7C4ep3PXHW2gfmnlqzTBmRevGA/I8QrG0dNPYkUnuNE6pqv2Rf/+KQmrvkMCIVJSs150w==,iv:2jkTmyLAXmNXN2CKT9v2LeWl+w4pPw6if0/YAFpznaU=,tag:KKws8Qyiyr56SMdR+FensQ==,type:str]
            key: ENC[AES256_GCM,data:L1k8ABiwyylJ5hBDdAkIKUwthM9ithKzdRdMsswfQuOyMIVwHPDMD0Mhtp98/zk2q3pROUurv1M5ni822rv+JEMJN3aPJe5fApC2Rf4khUHVuO/XkzPSXvJ9dy31y95pKFN87vWH0eEsGJrwHsaLpEmol8G5tYngbt8DnK8MMclExR/5uZNZ3J9ibpVBKb6MxErO5/RgAerQ2gE/jxwJkd8lt2uy3rbIZ5YRHgdtUK5h0MAWlxbYrRYS2wikTq3XxhRWI2ftmhA6yC+Am3lfEZ9v89MDYdK1aKbhcjgY6V67h9dJhcDimEvMdKkS3m+88akXAAjHHpEJk4ecWIWqQYboiIxz4zZy35JBP3sRZ0e1dqhnT1I9pbseNWsTFpDf2h40l50Ya+7d+dFGoHeqkg==,iv:KxzjHlrBFyDj3lJeQB9+aGDtzgiefTCv0xrgF6MyA+Q=,tag:bFJnDbGyXaXEnYD1MACz6w==,type:str]
    extraManifests:
        - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    allowSchedulingOnControlPlanes: true
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1xjszg77q3ddquyvgh7scmwh27hk4ns0uef5w4y5feq2nnc0v8y4smgdan7
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBQS1hTcFFWSyt2aUNjRlc3
            ZHRUNG9pdDlLTnVZSGx6WkRwN242U0FNT253ClFyekpvOFEwcWZ0UEhrdDNhdENP
            bkJNZUhkdm1UWW9Qaml4aHkyaWFlTXMKLS0tIGJsQklWQ0JVMjg1T0dtbFgxcWxB
            UVAweC9ISHpCM2VOQlp3OUk5eEdaQmMKYrl5cXUCPnL3VuNfAwlOuhahUSJX7F6G
            Ty/VZHIPCevR2AC2hIHHUxtmSALuhjOTEHRBp/c+BBuj64IUDuxa/g==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-12-23T23:48:14Z"
    mac: ENC[AES256_GCM,data:vBpzEZaOQ2kVJFFsIcCLinAQHjxJUMpKUu9F0wcxpyZwjOugRu8YC1M1x1FEUMp4//OnhOsddkseSicpnEk+wV+4McUwBOTtaNU6zqMkviGQoKbOWTIb0VD5aEvLedecCVhlhZUiViX7V7pJn4EWLqQ571iCQ59+yhtHS2zUBnY=,iv:h8dHTk8XcekfuM9YTjHI8Ry1wfNgFmB+l+i/b+j1Q68=,tag:ffAIsYUi8Q2qIYJrliw2tQ==,type:str]
    pgp: []
    encrypted_regex: ^(content|tls.crt|tls.key|crt|key|secret|secretboxEncryptionSecret|token|id|ca|data)$
    version: 3.8.1
