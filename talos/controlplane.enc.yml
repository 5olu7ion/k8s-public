version: v1alpha1
debug: false
persist: true
machine:
    type: controlplane
    token: ENC[AES256_GCM,data:HnP7MQ6swAETgGbFpNo2vq7c1cQfle8=,iv:ZDrJhKSqo4GaxCMPVGXYXgnTExUFSEwP6vJ7cudQeKw=,tag:D5oEEipgBKpRprDNFLg90A==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:sspHRaGZE1UK2urb13FNxWRLpQ3Xsk5SFlxJUAVaqc2Wa6F8yfP070NqHiiRV2jbC/tJmemekz253G3/X6RJs+62/Tysa0oMzQF6JqG3YT/6eLSiABKqtsH7TMDkQLB22+91pqB1QHrL+7DT+ol0I5A7N5YNrl/urEJVDRal9nnw9w64yyw0ef2kP8bZl/G/CD9gdoRrcEOnyd9Hyor+2rXUgeQcz7dPNlZPRC16He6Mwx4BQhZdXY9ik03AXbFGsjJaCXh+0RzYazZLoQnglJ+MZ/vnOY5OGn3cDrohGOEuFWNvq298WYLK0XRBbap/hCDAI9Wgjo/MFb4mndFvq5EXYP30VuGj3rwZ+p0axuWIBRW7FFSsSK4igBwm3eBkfw6ttoxiDmi+TgUtpZi5OtsTiJoHDKa6lrJ9imPSBkkrY/vFVPKTjeAe8tGz4zgLrsPjeLa0uYwUQKHr1yJjaz7MJcwkSGaRVBhQ3YuKsrLxhgcgVYsQNX/E6VeDAJab3CfU+O4m3xPF0vfivJrAZA1v2mmA/irc0L8SaWvtuIZTidbK/o51Wdj/kOC8jk7TlOKX/Iq3kF3vhV2CgyOB1hFqKRwTW5upjCKBqJ0gr3aRkaM2QQQKMomkXMUugqeViX+txSA6oqpXd0LX0l1loCymoV17icb1RGRhn6lJGwq0lmXc3Vuk04oSPNZxwPzXchtynIGDBDdNi37CbE8HDBItKJstt5AKrZaL95VZdkNTweSjm4GKga4QB4+qEhEvF0AMQiUWNOFoIVlRjwdxX7yHfTJTFNaegsm0Y6N/3E/myWL7gBvBBD/Xv6DiOYwZTXqQqaMf+8ItC3xwlGZh2dmEpSSchJU4Erru0DTXMH64Cwzp,iv:1cVKqePlH5i+YMncKxHM7lCEOwtnrZSt0esA7UuKwL4=,tag:itCYH8cz5uKIvWFjef3LNQ==,type:str]
        key: ENC[AES256_GCM,data:nDgr2i3/Zx33g3tOjLQpBVzwfSVJCbiPVKDw4GDSqhcS05rxPWNF0SERpKs5KaNtCBfQDUOjgdOlOh1fbK0CoA8Cuit75qmlg+ez0Si0HSK58YcrrmZ+Z2yQWA2A0hMhNnuCDorbUApPpqgoSokq4QiqVVLyPA71avxpew0Lw3ygql19aEhyubGTrkjwqPB9pknFwkLgjGOc+BPjnQ5mZqHtaURmdiQiuxAM8DHVszUziO6d,iv:+kALHWtKbrvJ7NQL8a1jfxOlcGiYr9zDVEcxoGtdRNg=,tag:zSvwAiMQzboSLDI1m0Xzuw==,type:str]
    certSANs: []
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.28.3
        defaultRuntimeSeccompProfileEnabled: true
        disableManifestsDirectory: true
        extraArgs:
            rotate-server-certificates: true
    network:
        hostname: talos
        interfaces:
            - deviceSelector:
                busPath: 0*
              dhcp: true
              vip:
                ip: 192.168.4.5
        nameservers:
            - 1.1.1.1
            - 8.8.8.8
    install:
        disk: /dev/sda
        #qemu-guest-agent, tailscale, util-linux-tools
        #https://factory.talos.dev/image/7d0c9bb43d29c3a66af593485d6d95ae14f241c90678c9cc05a4cf99d928ec1b/v1.6.1/metal-amd64.iso
        image: factory.talos.dev/installer/7d0c9bb43d29c3a66af593485d6d95ae14f241c90678c9cc05a4cf99d928ec1b:v1.6.1
        wipe: true
    registries: {}
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
        diskQuotaSupport: true
    time:
        servers:
            - 192.168.4.1
    files:
        - content: ENC[AES256_GCM,data:IsOjPD7Gt/gEp9vVd9JjN0aYXQNLURlHCEg7wrDaJzUf8Nkwyi1YVzMw6VW6d7B/g+LJKr6WqVHk+gFugEjVpf84rWxUVUe+PCS67N5f+Y+UKsMgyi67zns2SH0xgd1jAAQDeK1ogktUZ2J5U4koXUiM7B/FEJ64D2wkGlW+N5qm1aQpCa6bvSxKAqf7xJUGvwlTMyWU0XjwsGdaVUUFldB33WNvjSTGOW+8ZHUarw==,iv:/SCYBG1mxbQHQexj07QFB1bJ/cmbSNp4ZIt+xdHi9C8=,tag:pFV99iDfH9elHKzo63dIrA==,type:str]
          permissions: 420
          path: /var/etc/tailscale/auth.env
          op: create
cluster:
    id: ENC[AES256_GCM,data:C7hTwvDcanlAVAVj1rI4Gv5jqvXyYUzB2zAj1q4atP1ksQun/NyEJVnm+KU=,iv:v0DJSiETP/nYj2ocBPvoM3GYc6DnmJu6xcud+EaYAjg=,tag:hJxwqZwxy+b8yj78hrqdlw==,type:str]
    secret: ENC[AES256_GCM,data:jZN7zeGSKrMpLQuxIaBPytkvTcc6XFQg1tHKevbsyrNKoeqaEtIEteT/2Ts=,iv:oS0xZ9ug23ZQi45JMyyLjhQEHHSP5V971jWUYZffBKY=,tag:eYF5BmUxx+i4OL3oZJNznQ==,type:str]
    controlPlane:
        endpoint: https://talos.s3rv.dev:6443
    clusterName: talos-proxmox
    network:
        dnsDomain: talos.s3rv.dev
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    token: ENC[AES256_GCM,data:l3mJ4aVmWU71awRlq5jchblDP8sml3E=,iv:H8D07vAKoMIfSGN2qqYArUG3s6cRNn4xLLZeLtASe+s=,tag:Djg4lULuAV7PByGLN0CJ9w==,type:str]
    secretboxEncryptionSecret: ENC[AES256_GCM,data:C3+KGykvoXTpCZb0PbBaaZs+0N28zp//KuAo2o6xB6j+8aYWauIfVWxBgyw=,iv:KfXQiTYIDmYZpwfuYI4KTLjbqfsJMy4Q+xUCBQAV1Fo=,tag:MXUX8jPwC62MFPwBFwgzQA==,type:str]
    ca:
        crt: ENC[AES256_GCM,data:xtGECrT5dEgzP6NOd1i6ZHr4oK8csprfq/2/joWODsUQOCWKjQlhkiXdMRTzI3Fqi54ATDAav0LWQQnvSOjNIkWyYS1cZZfJPKqQO/Yef2gr1wd4B1ZsZdeL0tpKGSE3mHNROF4j9wkrDtpbBkRsC60FmzxkYdH1rviqsjaoGmlnkGIPQO2pIZEPNZox4K9DaeugQZoMcWQLwzA2k26uTgJjNWYlm97gYwW65MImrqHK7lnv6LHEhzsRYRymyfp5StGUGrijSC/XbIolv9M7bpzXXoc9ZQYgK8EkpYMmT7QWcVLBEpux3XOVNaBDf9VFi8OWu/YnheaaDNLWxwTl0F1h1MQYiLnoAthSmeG6MXMoX6POui1S0NoMPPtM0LHwzRc6ZQLUDnoixY6tJevR7S0ev4SoFSx2wRVyREnmJAH1iFb4j46uks3qo6B+KjwaJw4y0pG/hF+pdmra2LIHY6+xFG6ufpYy5347cNjts0BrHAz1a3TwD/ZCIG1I3Y9+xeNIuRR2RtIt5OqEdoN2vOSv+/9I9rWRLSpYP2RZ6/Vy6DgUSHYZ/pzSgWv4RtAeYdy79wk3jH3wNkSjaPBbGobUhDqa6vCBTgGJpimRh6h/0Yi8Y4sWpmatXIJgd2ul0F/yBSIMn/z4SqXXMj/DyQEKGXAFX5xF2w39C1UkRdPXrLFSkuWplsfP644OWqldrYz0RuyXZFKkKMMnklzQ0RHSvg32WXVG7jGcJj6qhqS5ztJ25DvfBWUapvgrEvh3VnY163oJnU0i+wWnXGCr8SyNu8s4x1u7AEx59NNXdYCJwSiUhJlk4GSUX+tVtQAI8qRNTG8oQSQnbVQwsho5DftucTMUyPQze7v424Jz8juwY+Wk7Qlw6QH0/++suEIz38Hz+b6NZs5+9nXos1ZxkD4r5ycXo4gr9WMRcuHXboJ644wJCwvl3fsMMNPoUCM4VEpp/X1am03xHwcNKJhB7E5fC70nr2gDRta5NM6d9zMzBtkgdp6k7LlZPzxfif0fR3KFk+RllodkIPC3/exVKipdQedgMJtdedRVyA==,iv:fIjAJMrhdztn+GJcqaLgRFb5d4C8jnybWA3c0AHm7zU=,tag:gAEsqDftdw/D3C+iutZwJA==,type:str]
        key: ENC[AES256_GCM,data:2m4ES14eFUxsi6l21MWwe280Yo3WobOEQPIeqrp8AI2hLAH7+l3kbn2feYycQp11Wib2uL07Hlw0KMr9BuEme/BGxBOxAYUJZGdedO0HFQgPQ7AR0wFrB+kjPMbaC2bE5jsClAndDt7ntLKnKS0t7Wob0AHXEBfuUXDDvPtZrcSEph+iHtlkTu2RChWlcd4Wjr9F+Rjx61cemWXWOMi6qmx1u2JJuuG+H9P6i9MQHPfqUdOaugupc4WlbJqbCANTSXg1TtiiyGhY+PQL5jJjHXCvPU7ZB4LV4ECpGskmlraFTWud4TFNwMNrKOK22di3/gx5cY30BYJBhZMjWu8ZWDMNLDxLe00XHvPcKHIoVLwHBhOTpCYqBSN+AOCgz51JoeUn1iHS+1nAvXV86+ptCw==,iv:KYlL5o17JxtW4d97+yZNCG14+RC8vTCZgViK8L9Sq4s=,tag:DdxChlvxqgaa7ZVLjTJeoA==,type:str]
    aggregatorCA:
        crt: ENC[AES256_GCM,data:allCsstwpvKwS4QZg1RbyiCt/MYu+nlkQkYGqVm0Hn4P+k7xjd0n3fOh9HMmUTVcF2+ac5pnYWoQ/UYqM7en6yG2XciXykgeWUXw3Vs6EEzfs9P0n/6cgE4D7RDqtciW/77be0DLXdtkrZz6XFkriHT0rZnGYEljInpzj/4zDwbmAmrbUBwBIj5xuW8GSO23zXlC4gHEQu6quLmNi/H3KmN218YNbyP92MKgdflvct2R5ogb4FrM0WSObprEOaocbQNG8V/weyA/ivXA4lgliXByJdgVfWgqDqt6+jUfcV4E2ZZCmgDnVsFkX27PNCM8mtyRDoxqItEJ+iYnI/jmCeFtiKjXfggwuyQHDYzJCgyKfW0ZVaLc6CZ3TAzn0JxMLdr8KnTMjwfz6EjnsiGEcGWiAK0Lg5D60qB/iNG0VeIsDyegoraY2+R0EnY3bXrSR6G43s7/Hh3Z52t4rxp3wFPBnucKaUYap2PiqkRpTSM9xq6F9L5lw8Cz1zcK/1DC6EYAhggC61TqTAvTIym60/c0QWHo2ZnpE+85FGhIeuO0zhBDcA7yJALKQevICgGaXr3LztPPdmZkTD23W0FvJ0Z7onrMsr+OW2GPlIao3nYdbJUZndVhjuPL/F5Vnzn4GKvCCJU5jIpO1ehynjuUBjnThy6kbPO4ED+wvujS8LqUUX+QA0kBvCY80pQiXhzMC0l/nBS6gzSmPMVx7iQXgeDxDG+vLwo7zQCuyTw0iRJtusPPi6zIG1vCoMcGWm4GjIaFHv/R4TPLFEWRoqpA4Z8oYuFOK12Qovk5z48ZlWQNm+w32LLVTyssYJDMcfr6QZ6GlvgVdgSZ+pVIDRgyWHN6KdVUz7QnC9LJ14tNTMfLQOePCIA7l3En2zQTUlOnRqwQh8QM4amnApXv4naX3X97IBzg1SCY5zmNsgIMLtqo6KxWkO/89Q/fgpTx/nge,iv:W1Aqtj6PdVkds62Dv/IoAzy4K/dBHh2EWMXx0JlPFVU=,tag:ERkuyLIaLGjGI2dLENT+MQ==,type:str]
        key: ENC[AES256_GCM,data:rvx3t3aDzKZVbtdn8yzJdgBNpsaYLw88TyZm8Wk+WWHGAWV7xpRmTmRH4l0FdeB4J5Tq7IUBG0EsN3AQ0PPdmqUyePBbHDF0hGtziFi7CUK70iTBPWaEiRSiTO9fQY+poXIxeGc5E9A+3ku5PNaSTop8hrzRXHPFSa19wW4S6reyA5EV+5xmOlNuseBYAbFJk7QVMgoLOu4478Qs7Am/EtVBoYbT49UqyXmfKhFqIwI+nUwmR92ilEU148AbZrMZp8v/s6a3tEVm5jaJARn0vbNKYbiv8XAh0irRsVMRxMoaVJRWHHCKCI7QLko2p8KPoo0oBxgzkmnkl0G6NrVj7pXuWv5tLHsni/P1PT+aEGwNM6ITsTFKbDnX5uimOogw4LEUpSnDoyD8/rRasbyLaQ==,iv:glZGT442DfZwfrrjA2n0Ax2TwhCXpJn7LZL9Av+r4bY=,tag:AKAejGxLkfBE3Ag15bAYzg==,type:str]
    serviceAccount:
        key: ENC[AES256_GCM,data:WT7ITaKxYrnflltuZJfHuXg5uLUMhtA1RM4MWo+q8K11h23zeuW2TOLqG9yjO+3BTHu5aG9/DNVl/d2QiNJKqVrGEc+UFXy7nzLvz/UQuMpDS/qmdFanBWXh6EosVhDImiquM4a2DMfrnIgdfG+xj/SxLE22XDdNInA73a4NTtygleuOZdHr7iX85eXzjHSmSL+EUUZ3K7Y+gCNebik4kN8btkw+MtlnHZiJNwIB+jL+oWDe/O/1h7B6KAqIafD1zK2JkUCyUSACtWETzXOQEgnf+CvMAeoOcPRYCU09K1tF1zEku4DDuCRmJZAGsc+Z/97VTs6UaN40MYVPNolymtRz8RGs9jtmIi2Y7/98AVNUfjgUsm463eOcpFJMO2MYlF92KrAKzq7+2R4QdmWtwQ==,iv:893+KCZkKOdTRcHUvOKxVPIqor3mUbrLUy65ghqSTIM=,tag:74H0P9Ml7IFZkGMA1znWbQ==,type:str]
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.28.3
        certSANs:
            - 192.168.4.5
            - talos.s3rv.dev
        disablePodSecurityPolicy: true
        admissionControl:
            - name: PodSecurity
              configuration:
                apiVersion: pod-security.admission.config.k8s.io/v1alpha1
                defaults:
                    audit: baseline
                    audit-version: latest
                    enforce: baseline
                    enforce-version: latest
                    warn: baseline
                    warn-version: latest
                exemptions:
                    namespaces:
                        - kube-system
                    runtimeClasses: []
                    usernames: []
                kind: PodSecurityConfiguration
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: None
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.28.3
    proxy:
        image: registry.k8s.io/kube-proxy:v1.28.3
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.28.3
    discovery:
        enabled: true
        registries:
            kubernetes:
                disabled: true
            service: {}
    etcd:
        ca:
            crt: ENC[AES256_GCM,data:JmEpu86mZ/ncKFsLPcAii9109BTUtmE0tUPZWI0DFfjway6h2nq1t3zbKxsiN2L3LeIW7QWoe4xKXcm2G7c+wZBIoY/FGhrKTgDJHavs/qhc7VAhGwOHCeA66U0aECfFhI845pvUxZ0+kdiXGiwRDnBomZSEj1q+cAf1oaLIRAM2Q+ztHv1mhHsk2Zq0HtE/Jark/g9hnqg1iRssbKI2MjEY1zUo0/dNPx8qVPkvPhMAJHP4R7KnFA0VWB2J/nGfOTI3VtSh28a7PmF7+acC6UyvgNa4zcfkw7MOWpkt3kXq9Cp8c4vxbh1RFmdIP/GutxBBQ6NI9l6zfrDrdQDdWr8CrBXUQ0FkOgZ9eNMzi7lWJzuM0uSorUkEK13iO8nTtfzQ88uXTIHK8QHfaL9+60fs9Bx68P5Ym1DFFunk1G9OO6NnFwm5ENcy4/E+kOQlASa6h4TSCdJtqVr2Jy/G+TQ3YkyMVqK6sUOCAd4aypcKjcSktazJuVVs6kTJEyq1pXMT/UfpilN2Vvfs4H8iNznEve8R6UhlADmGLOfgGUnQG0m5WS2M7jsUzx3mA4UrV2XrmlHWhcT6kRuOQ9oGqO0/OtwCeibVD+CuupWShSJ5YsyhQqyqn1wMRZZwOZTnby0Mx9EtaTaXDCSgVCIp2sOVliWHVrWcMGBg8q9rDj03lW/lMRg1iVujHD/tvj2aPCDsRkWyoLADJjoiSF+0PkDjza5QMr6kYGuPuzINA455b6HjkCUyZuRPgydOESvFTVtvkE9GIDzeeivplF/KVUeDYTUV8JxSpKpIv0DsYbVJtsEACkeY5WJUPDtklrmEIDF8FEweVBQ74MXAkNPVsvx/0IEo4WjHvxs6vxQ1WMw3xSrCJGj4bRJoG2Ba0f8k8oeMEHpSu+tOaQf7B+/yjJzEdzP+FXXeyiTyayhrwW/p4YCo0wOluEnAcA3QvmkoSrncD32+ewO+v7Lku5ubHdUox5VenNuT5/WGyeaXNsz8mrJ5fmvHhQZU6QK+m50Rb8HlUw==,iv:cBCkw4MJ7BN2MCXd2W2M+EMmoaWXscGfePlUu6L6mGg=,tag:YrJpmAdlREFdpK2pE0XESw==,type:str]
            key: ENC[AES256_GCM,data:ZdqHT281npIEjVeOQI5luAmj3A3Dmfse0G1EbmwdqajvggJOGKxHsAkhy2D0RtiKsz7ETeBRv8vSrEfWylXEmgrGzdYE24ST6YVnXfNs+ob35RuL4gXUey78HJJKIjzCJ4WyOoAnu3SCM64++vm4hYQIoRVlBCIeGKGVM92elWSd/9DKyirgMWKzXqn4spoVRTc1g48Wg1qDBlEpC0bOPZQxS4FXGicuNEXUIMfXFy3K8yyPmCfKPpGGDbwMNMxUdoOGK9oxFf1Ms0OSId3ThKnQ3haFQ1PJTmI7YNENdyht9FNkluDcyRS3ZWel4XNXRIdAUIqmgm+fpC66QX7bs5U7I9EOHVEKdsCPym/lCKxyLgrcnFiD9GLoCn5ZFc0cY3LMvmpndBGPYnEUexh+iQ==,iv:3iOQPNzMS48ow3ZClC0uqbmZfNiLSyiHMbyb9sVeDsU=,tag:SK9VnG0wGdmv5Bb1oIbBqg==,type:str]
    extraManifests:
        - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    allowSchedulingOnControlPlanes: true
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1xjszg77q3ddquyvgh7scmwh27hk4ns0uef5w4y5feq2nnc0v8y4smgdan7
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAyMVRVRy9RRWZkOGs0MWtV
            VmxrWlZleUdKVTZ5NVpXUlMrdTlza3ZMK1RjCnlYei94UmlZYkUrV3U1QWJWU2JT
            R0xJU0JTSzQveGdXRzFvVXFNRnNrL28KLS0tIGNqRU1WUGVwMWovcXdhbkx1TlRG
            ckIrVHZRRWZJaWRZYnRqWmRzeFYrdXMKSiFuUEssnJUePMpSH/IuDIwBDUBl/SsN
            T/z1BFjUMmQuVXuDvPHrOLAyFO01r2FgbXEZlyyuWC7X0u/fkUZZCQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-01-03T18:37:05Z"
    mac: ENC[AES256_GCM,data:d6fpQhUOWNb+tFJxYvC2hyGBLLiwOXooYPmgvBM6IzqYuw1QSkH4S96uI6TOqvm9VV+H9Q662Cz20RC/rXb3TG3TwNE/8QfNg64BPdKsNgd1+DbmOBJWgQHAt3H0kPv/kPRYLYFm6GIdijHajAu5p25+E0a83hhrS6lPLb5tOIk=,iv:IsXUo3nGuL4TITM9yNkS1+YFqJuYnFAmRn25PcjNOCI=,tag:oba8P8f1b/E/v4yVGEUJ6g==,type:str]
    pgp: []
    encrypted_regex: ^(content|tls.crt|tls.key|crt|key|secret|secretboxEncryptionSecret|token|id|ca|data)$
    version: 3.8.1
